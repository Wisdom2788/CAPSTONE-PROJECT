@startuml YouthGuard_Sequence_Visual
!theme plain
skinparam participantBackgroundColor White
skinparam participantBorderColor Black

title YouthGuard MVP - Course Enrollment Sequence

participant "Youth\n(Mobile App)" as Youth
participant "API Gateway" as Gateway
participant "Course Service" as CourseService
participant "User Service" as UserService
participant "Database" as DB
participant "Email Service" as Email

== Course Enrollment Process ==

Youth -> Gateway: POST /enroll/{courseId}
note right: User wants to enroll\nin cybersecurity course

Gateway -> UserService: Validate user token
UserService -> DB: Check user authentication
DB --> UserService: User authenticated
UserService --> Gateway: Token valid

Gateway -> CourseService: Process enrollment request
CourseService -> DB: Check course availability
DB --> CourseService: Course available

CourseService -> DB: Check user prerequisites  
DB --> CourseService: Prerequisites met

CourseService -> DB: Create enrollment record
DB --> CourseService: Enrollment created

CourseService -> DB: Update course statistics
DB --> CourseService: Statistics updated

CourseService -> Email: Send enrollment confirmation
Email --> CourseService: Email sent

CourseService --> Gateway: Enrollment successful
Gateway --> Youth: Success response with course access

== First Lesson Access ==

Youth -> Gateway: GET /lesson/{lessonId}
Gateway -> CourseService: Request lesson content
CourseService -> DB: Fetch lesson data
DB --> CourseService: Lesson content
CourseService -> DB: Record lesson start
CourseService --> Gateway: Lesson content + video URL
Gateway --> Youth: Lesson ready for viewing

note over Youth, DB: User can now start learning\nand track progress automatically

@enduml